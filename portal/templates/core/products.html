{% extends "base.html" %}
{% load static %}

{% block title %}Palettes neuves et usag√©es | Catalogue public Ilnu Transforme{% endblock %}

{% block extra_head %}
<meta name="description" content="{{ page_description }}">
<meta name="keywords" content="{{ page_keywords }}">
<meta name="robots" content="index, follow">
<link rel="canonical" href="{{ canonical_url }}">
<meta property="og:type" content="website">
<meta property="og:title" content="Palettes disponibles ‚Äì Ilnu Transforme">
<meta property="og:description" content="{{ page_description }}">
<meta property="og:url" content="{{ canonical_url }}">
<meta property="og:locale" content="fr_CA">
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:title" content="Catalogue de palettes ‚Äì Ilnu Transforme">
<meta property="twitter:description" content="{{ page_description }}">
{% if products_schema %}
<script type="application/ld+json">{{ products_schema|safe }}</script>
{% endif %}
{% endblock %}

{% block content %}
<main id="contenu-principal" class="products-main" role="main">
    <section class="product-hero" aria-labelledby="products-title">
        <div class="container hero-layout">
            <div class="hero-copy">

                <h1 id="products-title">Palettes en inventaire r√©el</h1>
                <p class="hero-intro">
                    Stock synchronis√© en temps r√©el. Z√©ro mauvaise surprise. Obtenez une soumission en 24h.
                </p>
                <div class="hero-cta">
                    <a class="btn btn-gold" href="{% url 'accounts:login' %}">Obtenir mon prix ‚Üí</a>
                    <a class="btn btn-secondary" href="tel:+1-418-671-2814">üìû 418-671-2814</a>
                </div>
                <ul class="hero-highlights" aria-label="Avantages principaux">
                    <li><span class="highlight-icon">‚úì</span> Qualit√© inspect√©e grade A/B</li>
                    <li><span class="highlight-icon">‚úì</span> Stock mis √† jour chaque jour</li>
                    <li><span class="highlight-icon">‚úì</span> Livraison r√©gionale SLSJ</li>
                    <li><span class="highlight-icon">‚úì</span> Consigne & r√©cup√©ration</li>
                </ul>
            </div>
            <div class="hero-gallery" aria-hidden="true">
                <div class="hero-photo hero-photo--primary"></div>
                <div class="hero-photo hero-photo--secondary"></div>
                <div class="hero-photo hero-photo--accent"></div>
            </div>
        </div>
    </section>

    {% if category_facets %}
    <section class="product-categories" aria-labelledby="categories-title">
        <div class="container">
            <h2 id="categories-title">Familles de palettes en vedette</h2>
            <div class="category-grid" role="list">
                {% for category in category_facets %}
                <article class="category-card category-card--{{ forloop.counter }}" role="listitem">
                    <div class="category-visual"></div>
                    <div class="category-body">
                        <span class="category-pill">{{ category.count }} types</span>
                        <h3>{{ category.name }}</h3>
                        <p>Palettes {{ category.name|lower }} livr√©es au rythme de vos op√©rations, stock v√©rifi√© en
                            direct.</p>
                    </div>
                </article>
                {% endfor %}
            </div>
        </div>
    </section>
    {% endif %}

    {% if products %}
    <section class="product-listing" aria-labelledby="listing-title">
        <div class="container">
            <div class="listing-header">
                <div>
                    <h2 id="listing-title">Palettes pr√™tes √† √™tre exp√©di√©es</h2>
                    <p class="listing-subtitle">Inventaire synchronis√© avec notre ERP. Contactez-nous pour les prix et
                        la disponibilit√© exacte.</p>
                </div>
                <div class="listing-meta">
                    <span class="badge">{{ products_total }} mod√®les disponibles</span>
                </div>
            </div>
            <div class="product-grid" role="list" aria-live="polite">
                {% for product in products %}
                <article class="product-card" role="listitem">
                    <div class="product-copy">
                        <header>
                            <p class="product-code">{{ product.code|default:"SKU" }}</p>
                            <h3>{{ product.name }}</h3>
                        </header>
                        <p class="product-description">{{ product.description|default:"Contactez-nous pour les
                            sp√©cifications." }}</p>
                        <ul class="product-tags" aria-label="Cat√©gories">
                            {% for category in product.categories %}
                            <li>{{ category }}</li>
                            {% empty %}
                            <li>Palettes</li>
                            {% endfor %}
                        </ul>
                        {% if product.quantity_available and product.quantity_available > 0 %}
                        <p class="availability">En stock ‚Äì pr√™t √† exp√©dier</p>
                        {% endif %}
                        <div class="product-actions">
                            <a class="btn btn-gold btn-sm" href="{% url 'accounts:login' %}">Obtenir un prix</a>
                            <a class="btn btn-ghost" href="tel:+1-418-671-2814">üìû Appeler</a>
                        </div>
                    </div>
                </article>
                {% endfor %}
            </div>
            {% if paginator.num_pages > 1 %}
            <nav class="product-pagination" aria-label="Pagination des produits">
                <p class="product-pagination__summary">
                    Page {{ products.number }} sur {{ paginator.num_pages }} ‚Äî {{ products_total }} mod√®les au total
                </p>
                <div class="product-pagination__controls">
                    {% if products.has_previous %}
                    <a class="product-pagination__nav" href="?page={{ products.previous_page_number }}" rel="prev">‚Üê
                        Pr√©c√©dent</a>
                    {% else %}
                    <span class="product-pagination__nav is-disabled" aria-disabled="true">‚Üê Pr√©c√©dent</span>
                    {% endif %}

                    <div class="product-pagination__pages" role="list">
                        {% for page_num in paginator.page_range %}
                        {% if page_num == products.number %}
                        <span role="listitem" class="product-pagination__page is-active" aria-current="page">{{ page_num
                            }}</span>
                        {% else %}
                        <a role="listitem" class="product-pagination__page" href="?page={{ page_num }}">{{ page_num
                            }}</a>
                        {% endif %}
                        {% endfor %}
                    </div>

                    {% if products.has_next %}
                    <a class="product-pagination__nav" href="?page={{ products.next_page_number }}" rel="next">Suivant
                        ‚Üí</a>
                    {% else %}
                    <span class="product-pagination__nav is-disabled" aria-disabled="true">Suivant ‚Üí</span>
                    {% endif %}
                </div>
            </nav>
            {% endif %}
        </div>
    </section>
    {% endif %}

    <section class="product-faq" aria-labelledby="faq-title">
        <div class="container">
            <h2 id="faq-title">Questions fr√©quentes</h2>
            <div class="faq-grid">
                <article class="faq-card">
                    <h3>Pourquoi pas de prix affich√©s?</h3>
                    <p>Les tarifs varient selon le volume et le grade. Nous pr√©parons une soumission personnalis√©e bas√©e
                        sur l'inventaire r√©el.</p>
                </article>
                <article class="faq-card">
                    <h3>L'inventaire est-il fiable?</h3>
                    <p>Oui! Cette page se synchronise avec Tryton toutes les 15 minutes. Seuls les produits en stock
                        sont affich√©s.</p>
                </article>
                <article class="faq-card">
                    <h3>Offrez-vous la consignation?</h3>
                    <p>Absolument. Indiquez vos besoins et notre √©quipe g√®re les √©changes et le suivi dans notre
                        syst√®me.</p>
                </article>
                <article class="faq-card">
                    <h3>Des fiches produits √† venir?</h3>
                    <p>Bient√¥t! Une page d√©di√©e par SKU sera disponible pour faciliter le partage et le r√©f√©rencement.
                    </p>
                </article>
            </div>
        </div>
    </section>

    <section class="product-cta" aria-labelledby="cta-title">
        <div class="container">
            <div class="cta-content">
                <p class="cta-eyebrow">Pr√™t √† commander?</p>
                <h2 id="cta-title">R√©ponse garantie en moins de 24h ouvrables</h2>
                <p>Partagez vos besoins ‚Äî on s'occupe du reste. Soumission en fran√ßais, livr√©e par courriel.</p>
                <div class="cta-buttons">
                    <a class="btn btn-gold btn-lg" href="{% url 'accounts:login' %}">Obtenir ma soumission ‚Üí</a>
                    <a class="btn btn-white" href="tel:+1-418-671-2814">üìû 418-671-2814</a>
                </div>
            </div>
        </div>
    </section>
</main>

<footer class="footer" role="contentinfo">
    <div class="container footer-content">
        <div>
            <p>&copy; 2025 Ilnu Transforme ‚Äì R√©cup√©ration et vente de palettes.</p>
            <p>Site propuls√© par Tryton + Django. Catalogue synchronis√© automatiquement.</p>
        </div>
        <div class="footer-links">
            <a href="{% url 'core:home' %}">Accueil</a>
            <a href="{% url 'core:products' %}">Produits</a>
            <a href="{% url 'core:home' %}#contact">Contact</a>
        </div>
    </div>
</footer>
{% endblock %}