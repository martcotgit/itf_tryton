{% extends "base.html" %}
{% load static %}

{% block title %}Palettes neuves et usag√©es | Catalogue public Ilnu Transforme{% endblock %}

{% block extra_head %}
    <meta name="description" content="{{ page_description }}">
    <meta name="keywords" content="{{ page_keywords }}">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="{{ canonical_url }}">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Palettes disponibles ‚Äì Ilnu Transforme">
    <meta property="og:description" content="{{ page_description }}">
    <meta property="og:url" content="{{ canonical_url }}">
    <meta property="og:locale" content="fr_CA">
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="Catalogue de palettes ‚Äì Ilnu Transforme">
    <meta property="twitter:description" content="{{ page_description }}">
    {% if products_schema %}
        <script type="application/ld+json">{{ products_schema|safe }}</script>
    {% endif %}
{% endblock %}

{% block content %}
<main id="contenu-principal" class="products-main" role="main">
    <section class="product-hero" aria-labelledby="products-title">
        <div class="container hero-layout">
            <div class="hero-copy">
                <p class="breadcrumb" aria-label="Fil d'Ariane">Accueil / Produits</p>
                <h1 id="products-title">Catalogue de palettes disponibles</h1>
                <p class="hero-intro">
                    Tous les produits list√©s ci-dessous sont synchronis√©s avec Tryton¬†: nous affichons uniquement les palettes actuellement en inventaire positif afin d'√©viter les mauvaises surprises. Choisissez la famille de palettes neuves, usag√©es ou consign√©es qui convient √† vos op√©rations et communiquez avec nous pour une soumission rapide.
                </p>
                <div class="hero-cta">
                    <a class="btn btn-primary" href="tel:+1-418-671-2814">üìû 418-671-2814</a>
                    <a class="btn btn-secondary" href="{% url 'accounts:login' %}">Demander une soumission</a>
                </div>
                <ul class="hero-highlights" aria-label="Avantages principaux">
                    <li>Inspection et tri grade A/B</li>
                    <li>Rotation des stocks quotidienne</li>
                    <li>Livraison au Saguenay‚ÄìLac-Saint-Jean</li>
                    <li>Options consignation et r√©cup√©ration</li>
                </ul>
            </div>
            <div class="hero-gallery" aria-hidden="true">
                <div class="hero-photo hero-photo--primary"></div>
                <div class="hero-photo hero-photo--secondary"></div>
                <div class="hero-photo hero-photo--accent"></div>
            </div>
        </div>
    </section>

    <section class="product-categories" aria-labelledby="categories-title">
        <div class="container">
            <h2 id="categories-title">Familles de palettes en vedette</h2>
            {% if category_facets %}
                <div class="category-grid" role="list">
                    {% for category in category_facets %}
                        <article class="category-card category-card--{{ forloop.counter }}" role="listitem">
                            <div class="category-visual"></div>
                            <div class="category-body">
                                <span class="category-pill">{{ category.count }} types</span>
                                <h3>{{ category.name }}</h3>
                                <p>Palettes {{ category.name|lower }} livr√©es au rythme de vos op√©rations, stock v√©rifi√© en direct.</p>
                            </div>
                        </article>
                    {% endfor %}
                </div>
            {% else %}
                <p class="empty-state">Aucune cat√©gorie disponible pour l'instant.</p>
            {% endif %}
        </div>
    </section>

    <section class="product-listing" aria-labelledby="listing-title">
        <div class="container">
            <div class="listing-header">
                <div>
                    <h2 id="listing-title">Palettes pr√™tes √† √™tre exp√©di√©es</h2>
                    <p class="listing-subtitle">Chaque fiche passera sous peu dans une page d√©taill√©e pour optimiser notre r√©f√©rencement; d'ici l√†, cette liste publique pr√©sente l'inventaire r√©el sans afficher les prix.</p>
                </div>
                <div class="listing-meta">
                    <span class="badge">{{ products_total }} mod√®les en stock</span>
                </div>
            </div>
            {% if products %}
                <div class="product-grid" role="list" aria-live="polite">
                    {% for product in products %}
                        <article class="product-card" role="listitem">
                            <div class="product-copy">
                                <header>
                                    <p class="product-code">{{ product.code|default:"Code √† venir" }}</p>
                                    <h3>{{ product.name }}</h3>
                                </header>
                                <p class="product-description">{{ product.description|default:"Description √† confirmer avec notre √©quipe." }}</p>
                                <ul class="product-tags" aria-label="Cat√©gories">
                                    {% for category in product.categories %}
                                        <li>{{ category }}</li>
                                    {% empty %}
                                        <li>Palettes</li>
                                    {% endfor %}
                                </ul>
                                {% if product.quantity_available and product.quantity_available > 0 %}
                                    <p class="availability">Inventaire v√©rifi√© dans Tryton ‚Äì pr√™t √† √™tre planifi√©.</p>
                                {% endif %}
                                <div class="product-actions">
                                    <a class="btn btn-secondary" href="{% url 'accounts:login' %}">Parler √† un conseiller</a>
                                    <a class="btn btn-link" href="tel:+1-418-671-2814">Appeler</a>
                                </div>
                            </div>
                        </article>
                    {% endfor %}
                </div>
                {% if paginator.num_pages > 1 %}
                    <nav class="product-pagination" aria-label="Pagination des produits">
                        <p class="product-pagination__summary">
                            Page {{ products.number }} sur {{ paginator.num_pages }} ‚Äî {{ products_total }} mod√®les au total
                        </p>
                        <div class="product-pagination__controls">
                            {% if products.has_previous %}
                                <a class="product-pagination__nav" href="?page={{ products.previous_page_number }}" rel="prev">Page pr√©c√©dente</a>
                            {% else %}
                                <span class="product-pagination__nav is-disabled" aria-disabled="true">Page pr√©c√©dente</span>
                            {% endif %}

                            <div class="product-pagination__pages" role="list">
                                {% for page_num in paginator.page_range %}
                                    {% if page_num == products.number %}
                                        <span role="listitem" class="product-pagination__page is-active" aria-current="page">{{ page_num }}</span>
                                    {% else %}
                                        <a role="listitem" class="product-pagination__page" href="?page={{ page_num }}">Page {{ page_num }}</a>
                                    {% endif %}
                                {% endfor %}
                            </div>

                            {% if products.has_next %}
                                <a class="product-pagination__nav" href="?page={{ products.next_page_number }}" rel="next">Page suivante</a>
                            {% else %}
                                <span class="product-pagination__nav is-disabled" aria-disabled="true">Page suivante</span>
                            {% endif %}
                        </div>
                    </nav>
                {% endif %}
            {% else %}
                <div class="empty-state">
                    <p>Aucun produit n'est pr√©sentement disponible. Notre √©quipe met √† jour Tryton; revenez sous peu ou contactez-nous pour r√©server votre prochaine production.</p>
                </div>
            {% endif %}
        </div>
    </section>

    <section class="product-faq" aria-labelledby="faq-title">
        <div class="container">
            <h2 id="faq-title">Questions fr√©quentes</h2>
            <div class="faq-grid">
                <article>
                    <h3>Pourquoi ne voyez-vous pas les prix?</h3>
                    <p>Les tarifs varient selon le volume, le grade (A/B) et le plan logistique. Nous confirmons chaque soumission avec les donn√©es Tryton (stock et co√ªt) avant d'√©mettre une offre personnalis√©e.</p>
                </article>
                <article>
                    <h3>Comment garantissez-vous la disponibilit√©?</h3>
                    <p>Cette page lit directement les gabarits Tryton et n'affiche pas les palettes √† quantit√© nulle. Une mise en cache de 15¬†minutes nous permet de r√©duire les appels √† la base tout en restant fid√®le √† l'inventaire.</p>
                </article>
                <article>
                    <h3>Peut-on r√©server des palettes consign√©es?</h3>
                    <p>Oui. S√©lectionnez la famille ¬´¬†Consignation¬†¬ª et indiquez vos besoins. Nos √©quipes s'occupent ensuite du suivi dans Tryton et des √©changes de palettes.</p>
                </article>
                <article>
                    <h3>Une fiche d√©taill√©e par produit sera-t-elle disponible?</h3>
                    <p>Nous pr√©parons une page d√©di√©e pour chaque SKU (ex. 48x40, CHEP, export). Ces fiches seront aliment√©es par Tryton pour simplifier le SEO et le partage aux clients.</p>
                </article>
            </div>
        </div>
    </section>

    <section class="product-cta" aria-labelledby="cta-title">
        <div class="container">
            <div>
                <p class="cta-eyebrow">Pr√™t √† r√©cup√©rer ou commander vos palettes?</p>
                <h2 id="cta-title">Un conseiller Ilnu Transforme vous r√©pond en moins d'un jour ouvrable.</h2>
                <p>Partagez vos volumes, dimensions et d√©lais. Nous v√©rifions imm√©diatement l'inventaire Tryton et pr√©parons une soumission en fran√ßais canadien adapt√©e √† votre flotte.</p>
                <div class="cta-buttons">
                    <a class="btn btn-primary" href="tel:+1-418-671-2814">üìû 418-671-2814</a>
                    <a class="btn btn-secondary" href="mailto:info@paletteitf.ca">√âcrire un courriel</a>
                </div>
            </div>
        </div>
    </section>
</main>

<footer class="footer" role="contentinfo">
    <div class="container footer-content">
        <div>
            <p>&copy; 2025 Ilnu Transforme ‚Äì R√©cup√©ration et vente de palettes.</p>
            <p>Site propuls√© par Tryton + Django. Catalogue synchronis√© automatiquement.</p>
        </div>
        <div class="footer-links">
            <a href="{% url 'core:home' %}">Accueil</a>
            <a href="{% url 'core:products' %}">Produits</a>
            <a href="{% url 'core:home' %}#contact">Contact</a>
        </div>
    </div>
</footer>
{% endblock %}
