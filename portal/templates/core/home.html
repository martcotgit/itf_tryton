{% extends "base.html" %}
{% load static %}

{% block title %}Ilnu Transforme - R√©cup√©ration de Palettes Neuves et Usag√©es | Mashteuiatsh, QC{% endblock %}

{% block extra_head %}
<!-- SEO Meta Tags -->
<meta name="description"
    content="Ilnu Transforme - Service de r√©cup√©ration et vente de palettes neuves et usag√©es √† Mashteuiatsh, Qu√©bec. Recyclage √©cologique, collecte professionnelle. Contactez-nous au 418-671-2814.">
<meta name="keywords"
    content="palettes, recyclage palettes, palettes neuves, palettes usag√©es, Mashteuiatsh, Qu√©bec, Ilnu Transforme, r√©cup√©ration palettes, vente palettes, recyclage √©cologique">
<meta name="author" content="Ilnu Transforme">
<meta name="robots" content="index, follow">
<meta name="language" content="French">
<meta name="geo.region" content="CA-QC">
<meta name="geo.placename" content="Mashteuiatsh">
<meta name="geo.position" content="48.5667;-72.2333">
<meta name="ICBM" content="48.5667, -72.2333">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://ilnutransforme.ca/">
<meta property="og:title" content="Ilnu Transforme - R√©cup√©ration de Palettes | Mashteuiatsh">
<meta property="og:description"
    content="Service de r√©cup√©ration et vente de palettes neuves et usag√©es √† Mashteuiatsh. Recyclage √©cologique et professionnel.">
<meta property="og:image" content="https://ilnutransforme.ca/images/og-image.jpg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:locale" content="fr_CA">
<meta property="og:site_name" content="Ilnu Transforme">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://ilnutransforme.ca/">
<meta property="twitter:title" content="Ilnu Transforme - R√©cup√©ration de Palettes | Mashteuiatsh">
<meta property="twitter:description"
    content="Service de r√©cup√©ration et vente de palettes neuves et usag√©es √† Mashteuiatsh. Recyclage √©cologique et professionnel.">
<meta property="twitter:image" content="https://ilnutransforme.ca/images/twitter-image.jpg">

<!-- Canonical URL -->
<link rel="canonical" href="https://ilnutransforme.ca/">

<!-- Favicon -->
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

<!-- Preconnect pour performance -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="dns-prefetch" href="//fonts.googleapis.com">

<!-- Donn√©es structur√©es Schema.org -->
<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "Ilnu Transforme",
        "description": "Service de r√©cup√©ration et vente de palettes neuves et usag√©es √† Mashteuiatsh, Qu√©bec",
        "url": "https://ilnutransforme.ca",
        "telephone": "+1-418-671-2814",
        "address": {
            "@type": "PostalAddress",
            "streetAddress": "1665, rue Nishk",
            "addressLocality": "Mashteuiatsh",
            "addressRegion": "QC",
            "addressCountry": "CA"
        },
        "geo": {
            "@type": "GeoCoordinates",
            "latitude": 48.5667,
            "longitude": -72.2333
        },
        "openingHours": "Mo-Fr 08:00-17:00",
        "priceRange": "$$",
        "serviceType": "R√©cup√©ration et vente de palettes",
        "areaServed": {
            "@type": "GeoCircle",
            "geoMidpoint": {
                "@type": "GeoCoordinates",
                "latitude": 48.5667,
                "longitude": -72.2333
            },
            "geoRadius": "50000"
        },
        "hasOfferCatalog": {
            "@type": "OfferCatalog",
            "name": "Services de palettes",
            "itemListElement": [
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": "R√©cup√©ration",
                        "description": "Collecte de palettes usag√©es"
                    }
                },
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": "Vente",
                        "description": "Palettes neuves et usag√©es"
                    }
                },
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": "Recyclage",
                        "description": "Transformation √©cologique des mat√©riaux"
                    }
                }
            ]
        }
    }
    </script>
{% endblock %}

{% block content %}
<main id="contenu-principal" class="main" role="main">
    {% if user.is_authenticated %}
    {# --- DASHBOARD VIEW (AUTHENTICATED) --- #}
    <div class="dashboard-container">
        <!-- Greeting Banner -->
        <div class="greeting-banner">
            <div class="greeting-icon">üëã</div>
            <div class="greeting-text">
                <h1>Bienvenue, {{ user.first_name|default:user.username }} !</h1>
                <p>Voici un r√©sum√© de votre activit√©.</p>
            </div>
        </div>

        <!-- Action Cards -->
        <div class="action-cards">
            <a href="{% url 'accounts:orders-new' %}" class="action-card">
                <div class="action-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                </div>
                <div class="action-label">Nouvelle Commande</div>
                <div class="action-desc">Passez une commande de palettes en quelques clics.</div>
            </a>
            <a href="{% url 'accounts:orders-list' %}" class="action-card">
                <div class="action-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                </div>
                <div class="action-label">Mes Commandes</div>
                <div class="action-desc">Suivez l'√©tat de vos commandes en cours et pass√©es.</div>
            </a>
            <a href="{% url 'accounts:profile' %}" class="action-card">
                <div class="action-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                </div>
                <div class="action-label">Mon Profil</div>
                <div class="action-desc">G√©rez vos informations personnelles et pr√©f√©rences.</div>
            </a>
        </div>

        <!-- Recent Activity Table -->
        <section class="recent-orders-section">
            <div class="section-header">
                <h2>Activit√© r√©cente</h2>
                <a href="{% url 'accounts:orders-list' %}" class="see-all-link">Voir tout</a>
            </div>
            <div class="table-responsive">
                <table class="modern-table">
                    <thead>
                        <tr>
                            <th># Commande</th>
                            <th>Date</th>
                            <th>Statut</th>
                            <th>Montant</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for order in recent_orders %}
                        <tr onclick="window.location='{% url 'accounts:orders-detail' order.id %}'"
                            style="cursor: pointer;">
                            <td><strong>{{ order.number|default:"-" }}</strong></td>
                            <td>{{ order.create_date|date:"d M Y" }}</td>
                            <td>
                                <span class="status-badge status-{{ order.state|lower }}">
                                    {{ order.state_label }}
                                </span>
                            </td>
                            <td>{% if order.total_amount %}{{ order.total_amount }} ${% else %}-{% endif %}</td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="4">
                                <div class="empty-state">
                                    <p>Vous n'avez pas encore pass√© de commande.</p>
                                    <a href="{% url 'accounts:orders-new' %}" class="btn btn-primary btn-sm">Passer
                                        votre premi√®re commande ‚Üí</a>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Help Banner -->
        <div class="help-banner">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path
                    d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
                </path>
            </svg>
            <div class="help-text">
                Une question ? Contactez notre √©quipe au <a href="tel:+14186712814" class="help-link">418-671-2814</a>.
            </div>
        </div>
    </div>

    {% else %}
    {# --- LANDING PAGE (ANONYMOUS) --- #}
    <section class="hero">
        <div class="hero-content">
            <h2 class="hero-title">Vos palettes livr√©es demain.<br>On r√©cup√®re les usag√©es.</h2>
            <p class="hero-subtitle">Commandez vos palettes neuves ou reconditionn√©es en ligne. On les livre, on
                r√©cup√®re les anciennes. Simple, rapide, √©cologique.</p>
            <div class="cta-buttons">
                <a href="{% url 'core:products' %}" class="btn btn-primary">Voir nos produits ‚Üí</a>
                <a href="#contact" class="btn btn-secondary">Demander un devis</a>
            </div>
        </div>
    </section>

    <section class="services" id="services" aria-labelledby="services-title">
        <div class="container">
            <h2 class="section-title" id="services-title">Nos Services</h2>
            <div class="services-grid">
                <article class="service-card">
                    <div class="service-icon" aria-hidden="true">üîÑ</div>
                    <h3>R√©cup√©ration</h3>
                    <p>On vient chercher vos palettes usag√©es, directement chez vous. Service rapide et √©cologique dans
                        toute la r√©gion.</p>
                </article>
                <article class="service-card">
                    <div class="service-icon" aria-hidden="true">üõí</div>
                    <h3>Vente</h3>
                    <p>Palettes neuves et reconditionn√©es, pr√™tes √† l'emploi. Qualit√© garantie pour tous vos besoins
                        logistiques.</p>
                </article>
                <article class="service-card">
                    <div class="service-icon" aria-hidden="true">‚ôªÔ∏è</div>
                    <h3>Recyclage</h3>
                    <p>Donnez une seconde vie √† vos palettes. Nous transformons les mat√©riaux de mani√®re responsable et
                        √©cologique.</p>
                </article>
            </div>
        </div>
    </section>

    <section class="contact" id="contact" aria-labelledby="contact-title">
        <div class="container">
            <h2 class="section-title" id="contact-title">Contactez-nous</h2>
            <div class="contact-content">
                <div class="contact-info">
                    <div class="contact-item address-item">
                        <div class="contact-icon" aria-hidden="true">üìç</div>
                        <div class="contact-details">
                            <h3>Adresse</h3>
                            <address>
                                1665, rue Nishk<br>
                                Mashteuiatsh, QC G0W 2H0<br>
                                Canada
                            </address>
                        </div>
                    </div>
                    <div class="contact-item phone-item">
                        <div class="contact-icon" aria-hidden="true">üìû</div>
                        <div class="contact-details">
                            <h3>T√©l√©phone</h3>
                            <p><a href="tel:+1-418-671-2814" aria-label="Appeler le 418-671-2814">418-671-2814</a></p>
                        </div>
                    </div>
                </div>
                <div class="contact-cta">
                    <div class="contact-message">
                        <h3>Pr√™t √† commander ? On livre d√®s demain.</h3>
                        <p>Communiquez avec nous d√®s aujourd'hui. Service rapide et professionnel dans la r√©gion du
                            Saguenay-Lac-Saint-Jean.</p>
                        <div class="cta-buttons">
                            <a href="tel:+1-418-671-2814" class="btn btn-primary" aria-label="Appeler maintenant">
                                <span class="btn-icon">üìû</span>
                                Parler √† un conseiller
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    {% endif %}
</main>

<footer class="footer" role="contentinfo">
    <div class="container">
        <p>&copy; 2025 Ilnu Transforme. Tous droits r√©serv√©s.</p>
    </div>
</footer>
{% endblock %}