{% extends "base.html" %}

{% block title %}Espace client ITF – Tableau de bord{% endblock %}

{% block content %}
<main id="contenu-principal" class="main dashboard-main" role="main">
    <section class="dashboard-section">
        <div class="container dashboard-container">
            <nav class="breadcrumb-nav" aria-label="Fil d'Ariane">
                <a href="{% url 'core:home' %}">Accueil</a>
                <span aria-hidden="true">/</span>
                <span aria-current="page">Tableau de bord</span>
            </nav>
            <header class="profile-hero dashboard-hero">
                <div class="profile-hero-info">
                    <div>
                        <h1 class="hero-title-sc">Bonjour !</h1>
                        <p class="profile-hero-summary">
                            {{ request.user.email }}
                        </p>
                        <p class="profile-hero-description">
                            Vous avez <strong>{{ summary.orders_to_complete_label|default:"0 commande" }}</strong> à
                            compléter.
                        </p>
                        <div class="dashboard-cta">
                            <a href="{% url 'accounts:orders-new' %}" class="btn btn-primary">Nouvelle commande</a>
                            <a href="{% url 'accounts:profile' %}" class="btn btn-secondary">Mon profil</a>
                        </div>
                    </div>
                </div>
            </header>

            <div class="dashboard-metrics">
                <article class="summary-card card-accent-top card-accent-warning">
                    <div class="summary-top">
                        <div class="summary-label-group">
                            <svg class="icon" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                            </svg>
                            <p class="summary-label">Factures à régler</p>
                        </div>
                        <span class="status-chip status-warning">À payer</span>
                    </div>
                    <div class="summary-stats">
                        {% for stat in summary.invoices_breakdown %}
                        <div class="stat-item">
                            <span class="stat-count">{{ stat.count }}</span>
                            <span class="stat-label">{{ stat.label }}</span>
                        </div>
                        {% endfor %}
                    </div>
                    <div class="summary-actions">
                        <a href="{% url 'accounts:invoices-list' %}" class="btn btn-primary stretched-link">Consulter
                            mes factures</a>
                    </div>
                </article>

                <article class="summary-card card-accent-top card-accent-info">
                    <div class="summary-top">
                        <div class="summary-label-group">
                            <svg class="icon" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.125-.504 1.125-1.125V14.25m-3 4.5V18m-6 0h6m-6 0F9 18 9 15.75 9 15.75M18.75 18V15.75m0 0L21 12a11.25 11.25 0 00-2.25-7.5h-13.5A11.25 11.25 0 003 12l2.25 3.75m13.5 0H5.25" />
                            </svg>
                            <p class="summary-label">Suivi commandes</p>
                        </div>
                        <span class="status-chip status-info">En suivi</span>
                    </div>
                    <div class="summary-stats">
                        {% for stat in summary.orders_breakdown %}
                        <div class="stat-item">
                            <span class="stat-count">{{ stat.count }}</span>
                            <span class="stat-label">{{ stat.label }}</span>
                        </div>
                        {% endfor %}
                    </div>
                    <div class="summary-actions">
                        <a href="{% url 'accounts:orders-list' %}" class="btn btn-primary stretched-link">Suivre mes
                            commandes</a>
                    </div>
                </article>
            </div>
        </div>
    </section>
</main>
{% endblock %}